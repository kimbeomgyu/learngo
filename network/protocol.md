# Protocol

네트워크 게층에 여러개가 각 계층에 해당되는

### IP

- 네트워크 상에서 컴퓨터를 구분하는 address 정보

### PORT

- 컴퓨터 안에는 다양한 터미널이 존재하는데 몇번 터미널에 전송을 할 것인지를 결정한다.

- 포트는 총 0번 ~ 65535번으로 이루어져 있다.

- 0 ~ 1023번 : well-known port, 잘 알려진 포트

- 1024번 ~ 49151번 : registered port, 등록된 포트

- 49152번 ~ 65535번 : dynamic port, 동적 포트

| 포트 | 프로토콜 |                         용도                          |
| :--: | :------: | :---------------------------------------------------: |
|  20  |   FTP    |                FTP - 데이터 전송 포트                 |
|  21  |   FTP    |                    FTP - 제어포트                     |
|  22  |   SSH    | Secure Shell - ssh, sftp 같은 프로토콜 및 포트 포워딩 |
|  23  |  TELNET  |     텔넷 프로토콜 - 암호화 되지 않은 텍스트 통신      |
|  25  |   SMTP   | Simple Mail Transfer Protocol - 이메일 전송 프로토콜  |
|  53  |   DNS    |                  Domain Name System                   |
|  80  |   HTTP   | HyperText Transfer Protocol - 웹 페이지 전송 프로토콜 |
| 123  |   NTP    |     Network Time Protocol - 시간 동기화 프로토콜      |
| 443  |  HTTPS   |    HyperText Transfer Protocol over Secure Sockets    |
| 514  |  Syslog  |               시스템 로그 전송 프로토콜               |

### TCP / UDP

- 둘 중 하나를 선택하는 것이다.

##### TCP 특징

패킷을 전송하기 위한 논리적 경로를 배정하는 방법

network에서 송신을 할때에는 문제가 몇가지 있다

- 지연시간
- 연결 보장 x
- 순서 보장 x
- 패킷 전송 보장 x

이런 문제들이 있는데 hardware에서

- 연결 유무 확인
- 순서 보장
- 송신 보장

을 해준다

**3 way handshake** 를 사용한다.

송신 --> connect request --> 수신

송신 <--------- ok <--------- 수신

송신 ---------> ok ---------> 수신

과정을 거쳐서 확인한다

송신 --> connect request --> 수신

송신 <--------- ok <--------- 수신

송신 ---------> .... ---------> 수신

송신 <--------- ok <--------- 수신

송신 ---------> .... ---------> 수신

응답을 했는데 계속 답이 안오면 연결이 끊어졌다고 간주한다.

- 속도가 느리다.

- 성능보다는 데이터의 신뢰성을 위해 사용한다.

- 서버와 클라이언트는 1대 1 로 연결된다.

- 전송 데이터의 크기가 무제한이다.

##### UDP 특징

- 연결 유무 x

- 순서 보장 x

- 송신 보장 x

**3way handshake** 로 인해 TCP에 비해 3배 빠르다.

유실되는 비율이 7%

- Relialde UDP / 소프트웨어로 유실되는 것을 방지하는 방법

- 신뢰성보다 성능이 중요할 때에 사용한다.

- 실시간 스트리밍에 자주 사용된다.

- 서버와 클라이언트가 1대 1, 1대 N, N대 N 등으로 연결 될 수 있다.

- 데이터그램 단위로 전송되며, 65535바이트를 초과하면 잘라서 보낸다.

|  프로토콜 종류 |      TCP       |          UDP           |
| -------------: | :------------: | :--------------------: |
|      연결 방식 | 연결형 서비스  |    비연결형 서비스     |
| 패킷 교환 방식 | 가상 회선 방식 |    데이터 그램 방식    |
|      전송 순서 | 전송 순서 보장 |    전송 순서 비보장    |
| 수신 여부 확인 | 수신 여부 확인 |    수신 여부 확인 x    |
|      통신 방식 |    1:1 통신    | 1:1 or 1:N or N:N 통신 |
|         신뢰성 |      높다      |          낮다          |
|           속도 |     느리다     |         빠르다         |

# 데이터 활용 방법

### Deterministic 방식

- 보통 UDP에 사용한다 반응성

- "같은 입력"에 "같은 시간"에 "결과"는 같다.

- sync desync가 중요하다

- 지연시간을 기다리고 적용하는 방식

  - delay
  -

- rollback 방식

  - user의 입력을 되감아서 sync를 맞춘다.
  - 유저가 느끼기에 렉으로 인지한다.
  - 구현하기 어렵다

- replay 방식

  -

### Server Authority 방식

- 보통 TCP에서 사용한다 서버권한이 중요하다
